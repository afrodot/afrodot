'use strict';(function(a){var h=0;a(function(){w(),l('first'),v(),u(),n(),m(),woosc_vars.open_bar==='yes'&&c('first'),a('.woosc-settings-fields').sortable({handle:'.label',update:function(a,b){q()}})}),a(document).on('click touch','.woosc_table .woosq-btn, .woosc_table .woosq-link',function(a){f(),a.preventDefault()}),a(document).on('click touch','.woosc-table-settings',function(){a('.woosc-settings').toggleClass('open')}),a(document).on('click touch','.woosc-bar-share',function(){a('.woosc-share').toggleClass('open'),a('.woosc-share-content').addClass('woosc-loading');var b={action:'woosc_share'};jQuery.post(woosc_vars.ajax_url,b,function(b){a('.woosc-share-content').html(b).removeClass('woosc-loading')})}),a(document).on('click touch','#woosc_copy_url, #woosc_copy_btn',function(a){A('#woosc_copy_url')}),a(document).on('click touch','.woosc-bar-search',function(){a('.woosc-search').toggleClass('open')}),a(document).on('click touch','.woosc-popup',function(b){a(b.target).closest('.woosc-popup-content').length===0&&a(this).toggleClass('open')}),a(document).on('keyup','#woosc_search_input',function(){if(a('#woosc_search_input').val()!=='')return h!=null&&clearTimeout(h),h=setTimeout(B,300),!1}),a(document).on('click touch','.woosc-item-add',function(){var d=a(this).attr('data-id');a('.woosc-search').toggleClass('open'),s(d),c(),b(),k()}),a(document).on('click touch','.woosc-popup-close',function(){a(this).closest('.woosc-popup').toggleClass('open')}),a(document).on('woovr_selected',function(e,c){var d=c.attr('data-id'),b=c.attr('data-pid');d>0?a('.woosc-btn-'+b).removeClass('woosc-btn-added woosc-added').attr('data-id',d):a('.woosc-btn-'+b).removeClass('woosc-btn-added woosc-added').attr('data-id',b)}),a(document).on('found_variation',function(c,d){var b=a(c.target).attr('data-product_id');a('.woosc-btn-'+b).removeClass('woosc-btn-added woosc-added').attr('data-id',d.variation_id),woosc_vars.button_text_change==='yes'&&a('.woosc-btn-'+b).html(woosc_vars.button_text)}),a(document).on('reset_data',function(c){var b=a(c.target).attr('data-product_id');a('.woosc-btn-'+b).removeClass('woosc-btn-added woosc-added').attr('data-id',b),woosc_vars.button_text_change==='yes'&&a('.woosc-btn-'+b).html(woosc_vars.button_text)}),a(document).on('click touch','.woosc-bar-remove',function(){var a=confirm(woosc_vars.remove_all);a==!0&&(j('all'),c(),b())}),a(document).on('click touch','.woosc-btn',function(g){var d=a(this).attr('data-id'),e=a(this).attr('data-pid'),f=a(this).attr('data-product_id');typeof e!==typeof void 0&&e!==!1&&(d=e),typeof f!==typeof void 0&&f!==!1&&(d=f),a(this).hasClass('woosc-btn-added woosc-added')?woosc_vars.click_again==='yes'?(j(d),c(),b()):(a('.woosc-bar-items').hasClass('woosc-bar-items-loaded')?i():c(),a('.woosc-table-items').hasClass('woosc-table-items-loaded')||b()):(a(this).addClass('woosc-btn-adding woosc-adding'),s(d),c(),b()),woosc_vars.open_table==='yes'&&r(),g.preventDefault()}),a(document).on('click touch','#woosc-area .woosc-bar-item-remove, #woosc-area .woosc-remove',function(d){var e=a(this).attr('data-id');a(this).parent().addClass('removing'),j(e),c(),b(),v(),d.preventDefault()}),a(document).on('click touch','.woosc-page .woosc-remove',function(b){b.preventDefault();var c=a(this).attr('data-id');j(c),location.reload()}),a(document).on('click touch','.woosc-bar-btn',function(){r()}),a(document).on('click touch',function(b){(woosc_vars.click_outside==='yes'||woosc_vars.click_outside==='yes_empty'&&parseInt(a('.woosc-bar').attr('data-count'))===0)&&a(b.target).closest('.wpc_compare_count').length===0&&a(b.target).closest('.woosc-popup').length===0&&a(b.target).closest('.woosc-btn').length===0&&a(b.target).closest('.woosc-table').length===0&&a(b.target).closest('.woosc-bar').length===0&&a(b.target).closest('.woosc-menu-item a').length===0&&(woosc_vars.open_button===''||a(b.target).closest(woosc_vars.open_button).length===0)&&t()}),a(document).on('click touch','#woosc-table-close',function(){f()}),woosc_vars.open_button!==''&&a(document).on('click touch',woosc_vars.open_button,function(a){woosc_vars.open_button_action==='open_page'&&woosc_vars.page_url!==''&&woosc_vars.page_url!=='#'?window.location.href=woosc_vars.page_url:(a.preventDefault(),x())}),a(document).on('change','.woosc-settings-field',function(){q()}),a(document).on('change','#woosc_highlight_differences',function(){a('.woosc-settings').toggleClass('open'),m()}),a(document).on('change','#woosc_hide_similarities',function(){a('.woosc-settings').toggleClass('open'),n()}),a(document).on('click touch','.woosc-menu-item a',function(d){woosc_vars.menu_action==='open_popup'&&(d.preventDefault(),a('.woosc-bar-items').hasClass('woosc-bar-items-loaded')?i():c(),a('.woosc-table-items').hasClass('woosc-table-items-loaded')||b(),k())});function B(){a('.woosc-search-result').html('').addClass('woosc-loading'),h=null;var b={action:'woosc_search',keyword:a('#woosc_search_input').val()};a.post(woosc_vars.ajax_url,b,function(b){a('.woosc-search-result').html(b).removeClass('woosc-loading')})}function e(b,c,d){var a=new Date,e;a.setTime(a.getTime()+d*24*60*60*1e3),e='expires='+a.toUTCString(),document.cookie=b+'='+c+'; '+e+'; path=/'}function d(e){for(var c=e+'=',d=document.cookie.split(';'),b=0,a;b<d.length;b++){for(a=d[b];a.charAt(0)==' ';)a=a.substring(1);if(a.indexOf(c)==0)return decodeURIComponent(a.substring(c.length,a.length))}return''}function o(){var a=g();return d(a)!=''?d(a):''}function z(){var d=g(),c=[],f;a('.woosc-bar-item').each(function(){var b=a(this).attr('data-id');b!==''&&c.push(b)}),f=c.join(),e(d,f,7),b()}function q(){var c=[],d='woosc_fields';woosc_vars.user_id!==''&&(d='woosc_fields_'+woosc_vars.user_id),a('.woosc-settings-field').each(function(){var b=a(this).val();a(this).prop('checked')?(c.push(b),a('.woosc_table .tr-'+b).removeClass('tr-hide')):a('.woosc_table .tr-'+b).addClass('tr-hide')}),e(d,c.join(','),7),b()}function s(b){var j=!1,i=woosc_vars.limit_notice,h=g(),f,c,k;d(h)!==''?(c=d(h).split(','),c.length<woosc_vars.limit?(c=a.grep(c,function(a){return a!=b}),c.unshift(b),k=c.join(),e(h,k,7)):(j=!0,i=i.replace('{limit}',woosc_vars.limit)),f=c.length):(e(h,b,7),f=1),l(f),a(document.body).trigger('woosc_added',[f]),j?(a('.woosc-btn[data-id="'+b+'"]').removeClass('woosc-btn-adding woosc-adding'),alert(i)):(a('.woosc-btn[data-id="'+b+'"]').removeClass('woosc-btn-adding woosc-adding').addClass('woosc-btn-added woosc-added'),woosc_vars.button_text_change==='yes'&&(a('.woosc-btn[data-id="'+b+'"]').html(woosc_vars.button_text_added),a(document.body).trigger('woosc_change_button_text',[b,woosc_vars.button_text_added])))}function j(b){var f=0,c=g(),h,i;b!=='all'?(d(c)!=''&&(h=d(c).split(','),h=a.grep(h,function(a){return a!=b}),i=h.join(),e(c,i,7),f=h.length),a('.woosc-btn[data-id="'+b+'"]').removeClass('woosc-btn-added woosc-added'),woosc_vars.button_text_change==='yes'&&(a('.woosc-btn[data-id="'+b+'"]').html(woosc_vars.button_text),a(document.body).trigger('woosc_change_button_text',[b,woosc_vars.button_text]))):(d(c)!=''&&(e(c,'',7),f=0),a('.woosc-btn').removeClass('woosc-btn-added woosc-added'),woosc_vars.button_text_change==='yes'&&(a('.woosc-btn').html(woosc_vars.button_text),a(document.body).trigger('woosc_change_button_text',['all',woosc_vars.button_text]))),l(f),a(document.body).trigger('woosc_removed',[f])}function v(){var b=g(),c;d(b)!=''&&(c=d(b).split(','),a('.woosc-btn').removeClass('woosc-btn-added woosc-added'),woosc_vars.button_text_change==='yes'&&(a('.woosc-btn').html(woosc_vars.button_text),a(document.body).trigger('woosc_change_button_text',['all',woosc_vars.button_text])),c.forEach(function(b){a('.woosc-btn-'+b).addClass('woosc-btn-added woosc-added'),woosc_vars.button_text_change==='yes'&&(a('.woosc-btn-'+b).html(woosc_vars.button_text_added),a(document.body).trigger('woosc_change_button_text',[b,woosc_vars.button_text_added]))}))}function c(b){var c={action:'woosc_load_bar',products:o()};a.post(woosc_vars.ajax_url,c,function(c){woosc_vars.hide_empty==='yes'&&(c==''||c==0)?(a('.woosc-bar-items').removeClass('woosc-bar-items-loaded'),p(),f()):(typeof b=='undefined'||b==='first'&&woosc_vars.open_bar==='yes')&&(a('.woosc-bar-items').html(c).addClass('woosc-bar-items-loaded'),i())})}function i(){a('#woosc-area').addClass('woosc-area-open-bar'),a('.woosc-bar').addClass('woosc-bar-open'),a('.woosc-bar-items').sortable({handle:'img',update:function(a,b){z()}}),a(document.body).trigger('woosc_bar_open')}function p(){a('#woosc-area').removeClass('woosc-area-open-bar'),a('.woosc-bar').removeClass('woosc-bar-open'),a(document.body).trigger('woosc_bar_close')}function b(){a('.woosc-table-inner').addClass('woosc-loading');var b={action:'woosc_load_table',products:o()};a.post(woosc_vars.ajax_url,b,function(b){a('.woosc-table-items').html(b).addClass('woosc-table-items-loaded'),a(window).width()>=768?woosc_vars.freeze_column==='yes'&&woosc_vars.freeze_row==='yes'?a('#woosc_table').tableHeadFixer({head:!0,left:1}):woosc_vars.freeze_column==='yes'?a('#woosc_table').tableHeadFixer({head:!1,left:1}):woosc_vars.freeze_row==='yes'&&a('#woosc_table').tableHeadFixer({head:!0}):woosc_vars.freeze_row==='yes'&&a('#woosc_table').tableHeadFixer({head:!0}),woosc_vars.scrollbar==='yes'&&a('.woosc-table-items').perfectScrollbar({theme:'wpc'}),a('.woosc-table-inner').removeClass('woosc-loading'),u(),n(),m()})}function k(){a('#woosc-area').addClass('woosc-area-open-table'),a('.woosc-table').addClass('woosc-table-open'),a('.woosc-bar-btn').addClass('woosc-bar-btn-open'),woosc_vars.bar_bubble==='yes'&&a('.woosc-bar').removeClass('woosc-bar-bubble'),a.trim(a('.woosc-table-items').html()).length||b(),a(document.body).trigger('woosc_table_open')}function f(){a('#woosc-area').removeClass('woosc-area-open woosc-area-open-table'),a('.woosc-table').removeClass('woosc-table-open'),a('.woosc-bar-btn').removeClass('woosc-bar-btn-open'),woosc_vars.bar_bubble==='yes'&&a('.woosc-bar').addClass('woosc-bar-bubble'),a(document.body).trigger('woosc_table_close')}function r(){a('.woosc-table').hasClass('woosc-table-open')?f():k()}function y(){a('#woosc-area').addClass('woosc-area-open'),c(),b(),i(),k(),a(document.body).trigger('woosc_open')}function t(){a('#woosc-area').removeClass('woosc-area-open'),p(),f(),a(document.body).trigger('woosc_close')}function x(){a('#woosc-area').hasClass('woosc-area-open')?t():y(),a(document.body).trigger('woosc_toggle')}function w(){var b=a('#woosc-area').attr('data-bg-color'),c=a('#woosc-area').attr('data-btn-color');a('.woosc-table').css('background-color',b),a('.woosc-bar').css('background-color',b),a('.woosc-bar-btn').css('background-color',c)}function l(b){var c,d;b==='first'&&(c=o(),c!=''?(d=c.split(','),b=d.length):b=0),a('.woosc-menu-item').each(function(){a(this).hasClass('menu-item-type-woosc')?a(this).find('.woosc-menu-item-inner').attr('data-count',b):a(this).addClass('menu-item-type-woosc').find('a').wrapInner('<span class="woosc-menu-item-inner" data-count="'+b+'"></span>')}),a('#woosc-area').attr('data-count',b),a('.woosc-bar').attr('data-count',b),a(document.body).trigger('woosc_change_count',[b])}function u(){a('.woosc_table > tbody > tr').each(function(){var b=a(this),c=0,d=!0;b.children('td').each(function(){if(c>0&&a(this).html().length>0)return d=!1,!1;c++}),d&&b.addClass('tr-empty').remove()})}function m(){a('#woosc_highlight_differences').prop('checked')?a('.woosc_table > tbody > tr').each(function(){var b=a(this),c=0,e=a(this).children('td').eq(1).html(),d=!1;b.children('td:not(.td-placeholder)').each(function(){if(c>1&&a(this).html()!==e)return d=!0,!1;c++}),d&&b.addClass('tr-highlight')}):a('.woosc_table tr').removeClass('tr-highlight')}function n(){a('#woosc_hide_similarities').prop('checked')?a('.woosc_table > tbody > tr').each(function(){var b=a(this),c=0,e=a(this).children('td').eq(1).html(),d=!0;b.children('td:not(.td-placeholder)').each(function(){if(c>1&&a(this).html()!==e)return d=!1,!1;c++}),d&&b.addClass('tr-similar')}):a('.woosc_table tr').removeClass('tr-similar')}function A(a){var d,e,b,c;a=typeof a=='string'?document.querySelector(a):a,navigator.userAgent.match(/ipad|ipod|iphone/i)?(d=a.contentEditable,e=a.readOnly,a.contentEditable=!0,a.readOnly=!0,b=document.createRange(),b.selectNodeContents(a),c=window.getSelection(),c.removeAllRanges(),c.addRange(b),a.setSelectionRange(0,999999),a.contentEditable=d,a.readOnly=e):a.select(),document.execCommand('copy'),alert(woosc_vars.copied_text.replace('%s',a.value))}function g(){return woosc_vars.user_id!==''?'woosc_products_'+woosc_vars.user_id:'woosc_products'}})(jQuery)